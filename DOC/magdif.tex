\documentclass[a4paper, twoside, 10pt, english]{article}
\setlength\overfullrule{5pt}

% (e)TeX stuff
\usepackage{etoolbox}
\usepackage{import}

% fonts and maths
\usepackage{fontspec}
%\setmainfont{TeX Gyre Pagella}[Numbers=Monospaced]
%\setsansfont{TeX Gyre Heros}
%\setmonofont[Scale=MatchLowercase]{Source Code Pro}
\usepackage{luatexbase} % needed to correct bug in microtype w.r.t. LuaTeX
\usepackage{microtype}
\usepackage[normalem]{ulem}
\usepackage{amsmath}  % [fleqn]
\usepackage{cancel}
\allowdisplaybreaks[1]
\numberwithin{equation}{section}
\usepackage[math-style=ISO, bold-style=ISO]{unicode-math}
%\setmathfont{TeX Gyre Pagella Math}
%\setmathfont{Latin Modern Math}[range=\dagger]
\DeclareSymbolFont{AMSb}{U}{msb}{m}{n}
\protected\def\mathbb#1{{\mathchar\numexpr256*\symAMSb+`#1\relax}}
\AfterPreamble{%
  \let\temp\varrho
  \let\varrho\rho
  \let\rho\temp
  \let\temp\vartheta
  \let\vartheta\theta
  \let\theta\temp
  \let\temp\varphi
  \let\varphi\phi
  \let\phi\temp
  \let\vecarr\vec
  \let\vec\symbf
}

% language
\usepackage{polyglossia}
\setmainlanguage{english}
\usepackage{csquotes}

% tables
\usepackage{array}
\usepackage{ragged2e}
%\usepackage{tabularx}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{subcaption}

% graphics
\usepackage{xcolor}
\newcommand\comment[1]{\begingroup\color{red}[#1]\endgroup}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{tikz}
\usetikzlibrary{math, arrows.meta, calc, intersections}
\newsavebox{\imagebox}

% import and display data
\usepackage{siunitx}
\sisetup{
  group-digits = false,
  add-decimal-zero = false,
  retain-unity-mantissa = false,
  separate-uncertainty,
  round-mode = off,
  %round-precision = 2,
  table-number-alignment = left,
  detect-mode = true
}

% (pseudo)code
\usepackage{algorithm}
\usepackage{algpseudocode}

% page layout
\raggedbottom
\tolerance=2000
\usepackage{enumitem}
\setlist{align=left}
\usepackage{parskip}
%\usepackage{setspace}
%\setstretch{1.125}
\usepackage{lastpage}
\usepackage[margin=2cm, head=15pt, includehead, includefoot]{geometry}
\usepackage[bottom, stable, perpage]{footmisc}
\usepackage{fancyhdr}
\fancyhf{}
\fancyfoot[C]{\thepage/\pageref{LastPage}}
\fancyhead[RO]{\slshape\rightmark}
\fancyhead[LE]{\slshape\leftmark}
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{\markboth{\thesection~#1}{}}
\renewcommand{\subsectionmark}[1]{\markright{\thesubsection~#1}}

% front and back matter
\usepackage{eso-pic}
\usepackage[
  backend = biber,
  bibstyle = numeric,
  citestyle = authoryear,
  sorting = none,
  maxcitenames = 1,
  maxbibnames = 5
]{biblatex}
\renewcommand*\finalnamedelim{,\ }
\DefineBibliographyStrings{english}{%
  andothers        = {et\,al\adddot},
  andmore          = {et\,al\adddot}
}
\addbibresource{magdif.bib}
%\usepackage{hyperxmp}
\usepackage[english,
% pdfa         = true,
  unicode      = true,
  bookmarks    = true,
  colorlinks   = true,
  linkcolor    = black,
  urlcolor     = black,
  citecolor    = black,
  pdfstartview = FitH
]{hyperref}
\hypersetup{
  pdftitle    = {Magnetic differential equations for stationary linear ideal MHD and their numerical solution},
  pdfauthor   = {Christoper Albert, Patrick Lainer},
  pdfsubject  = {write-up},
  pdfkeywords = {magnetohydrodynamics},
  pdflang     = {en}
}
\usepackage[
  xindy,
  numberedsection,
  section=subsection,
  toc,
% nonumberlist,
  nopostdot,
  nogroupskip
]{glossaries}
\makeglossaries
\glsdisablehyper
\AtEndDocument{%
  \glsaddallunused
}
%\newglossary[nlg]{base}{ntn}{not}{Base symbols}
%\newglossary[dlg]{deco}{dcn}{dec}{Symbol decorations}
\AfterPreamble{%
  \input{SRC/notation.tex}
}
\usepackage{glossary-longbooktabs}
\setglossarystyle{longragged-booktabs}
\renewcommand*\glsdescwidth{0.8\textwidth}

% references
\usepackage{cleveref}

% debugging
%\usepackage[inline]{showlabels}
%\usepackage[notref]{showkeys}

\title{Magnetic differential equations for stationary linear ideal MHD and their numerical solution}
\author{Christopher Albert, Patrick Lainer}

\subimport{SRC/}{definitions.tex}
\begin{document}
\maketitle
\pdfbookmark[0]{\contentsname}{toc}
\tableofcontents
\clearpage
\subimport{SRC/}{idealmhd.tex}
\subimport{SRC/}{task.tex}
\subimport{SRC/}{geometry.tex}
\subimport{SRC/}{fem.tex}
\subimport{SRC/}{linmhd.tex}
\subimport{SRC/}{inputs.tex}
\subimport{SRC/}{tests.tex}
\subimport{SRC/}{results.tex}
\appendix
\subimport{SRC/}{appendix.tex}
\subimport{SRC/}{snippets.tex}
\printbibliography[heading=bibintoc]
\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
